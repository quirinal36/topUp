# 수동 테스트 시나리오 (Manual Test Scenarios)

카페 선결제 관리 시스템 납품 전 수동 테스트 가이드입니다.
각 시나리오를 순서대로 진행하며 예상 결과와 실제 결과를 비교해주세요.

---

## 목차
1. [회원가입 및 인증 테스트](#1-회원가입-및-인증-테스트)
2. [로그인/로그아웃 테스트](#2-로그인로그아웃-테스트)
3. [고객 관리 테스트](#3-고객-관리-테스트)
4. [충전 기능 테스트](#4-충전-기능-테스트)
5. [차감 기능 테스트](#5-차감-기능-테스트)
6. [거래 취소 테스트](#6-거래-취소-테스트)
7. [대시보드 테스트](#7-대시보드-테스트)
8. [PIN 관리 테스트](#8-pin-관리-테스트)
9. [비밀번호 재설정 테스트](#9-비밀번호-재설정-테스트)
10. [에러 핸들링 테스트](#10-에러-핸들링-테스트)

---

## 테스트 환경 준비

- [ ] 로컬 서버 실행 (`./start.sh`)
- [ ] 브라우저 개발자 도구 열기 (F12)
- [ ] 네트워크 탭 확인
- [ ] 테스트용 계정 준비

---

## 1. 회원가입 및 인증 테스트

### 시나리오 1.1: 정상 회원가입 플로우
**목적:** 4단계 회원가입 전체 플로우 검증

**단계:**
1. [ ] 회원가입 페이지(`/register`) 접속
2. [ ] **1단계 - 계정 정보:**
   - 아이디 입력 (4-20자, 영문 소문자 + 숫자만)
   - 비밀번호 입력 (8자 이상, 영문 + 숫자 포함)
   - "다음" 클릭
3. [ ] **2단계 - 상점 정보:**
   - 상점명 입력
   - 이메일 입력 (선택, 비밀번호 재설정용)
   - "다음" 클릭
4. [ ] **3단계 - 본인인증:**
   - "본인인증 하기" 버튼 클릭
   - NICE 본인인증 완료 (개발: Mock 모드)
5. [ ] **4단계 - 완료:**
   - Turnstile 봇 방지 체크
   - "회원가입 완료" 클릭

**예상 결과:**
- 가입 성공 메시지 표시
- 초기 PIN 번호 표시 (저장 필요 안내)
- 대시보드로 자동 이동

**체크포인트:**
- [ ] 각 단계 전환이 부드럽게 이루어지는가?
- [ ] 뒤로가기 버튼이 정상 작동하는가?
- [ ] 새로고침 시 상태가 초기화되는가?

---

### 시나리오 1.2: 아이디 중복 확인
**목적:** 아이디 실시간 중복 검사 확인

**단계:**
1. [ ] 회원가입 1단계에서 기존 아이디 입력
2. [ ] 아이디 입력 필드 blur (포커스 해제)

**예상 결과:**
- "이미 사용 중인 아이디입니다" 메시지 표시
- "다음" 버튼 비활성화

---

### 시나리오 1.3: 유효성 검사 오류
**목적:** 입력 유효성 검사 동작 확인

**테스트 케이스:**
| 필드 | 입력값 | 예상 오류 메시지 |
|------|--------|------------------|
| 아이디 | `abc` | 4자 이상 입력 필요 |
| 아이디 | `Test123` | 영문 소문자와 숫자만 가능 |
| 비밀번호 | `1234567` | 8자 이상 입력 필요 |
| 비밀번호 | `abcdefgh` | 숫자 포함 필요 |
| 비밀번호 | `12345678` | 영문 포함 필요 |

---

## 2. 로그인/로그아웃 테스트

### 시나리오 2.1: 정상 로그인
**목적:** 기본 로그인 플로우 검증

**단계:**
1. [ ] 로그인 페이지(`/login`) 접속
2. [ ] 아이디/비밀번호 입력
3. [ ] "로그인" 버튼 클릭

**예상 결과:**
- 대시보드로 이동
- 상단에 상점명 표시
- 토큰이 localStorage에 저장됨

---

### 시나리오 2.2: 로그인 실패 - 잘못된 자격증명
**목적:** 잘못된 로그인 정보 처리 확인

**단계:**
1. [ ] 잘못된 비밀번호로 로그인 시도

**예상 결과:**
- "아이디 또는 비밀번호가 올바르지 않습니다" 메시지
- 입력 필드 유지

---

### 시나리오 2.3: 로그인 Rate Limiting
**목적:** 브루트포스 공격 방지 확인

**단계:**
1. [ ] 잘못된 비밀번호로 6회 연속 로그인 시도

**예상 결과:**
- 5회 실패 후 "너무 많은 로그인 시도입니다. X초 후에 다시 시도해주세요" 메시지
- 일정 시간 후 다시 시도 가능

---

### 시나리오 2.4: 로그아웃
**목적:** 로그아웃 기능 검증

**단계:**
1. [ ] 로그인된 상태에서 메뉴 > 로그아웃 클릭

**예상 결과:**
- 로그인 페이지로 이동
- localStorage 토큰 삭제됨
- 보호된 페이지 접근 시 로그인 페이지로 리다이렉트

---

### 시나리오 2.5: 세션 만료
**목적:** 토큰 만료 시 동작 확인

**단계:**
1. [ ] 로그인 후 개발자 도구에서 토큰 만료시간 확인
2. [ ] 토큰을 임의로 변조하거나 삭제
3. [ ] API 호출 (페이지 새로고침 또는 액션)

**예상 결과:**
- 401 Unauthorized 응답
- 자동 로그아웃 후 로그인 페이지로 이동

---

## 3. 고객 관리 테스트

### 시나리오 3.1: 고객 등록
**목적:** 신규 고객 등록 기능 검증

**단계:**
1. [ ] 고객 관리 페이지 접속
2. [ ] "고객 추가" 버튼 클릭
3. [ ] 고객명 입력
4. [ ] 전화번호 뒤 4자리 입력 (선택)
5. [ ] "등록" 클릭

**예상 결과:**
- 고객 목록에 새 고객 추가됨
- 초기 잔액 0원
- 성공 토스트 메시지

---

### 시나리오 3.2: 고객 검색 (POS 스타일)
**목적:** 넘패드 검색 기능 검증

**단계:**
1. [ ] 대시보드에서 숫자 넘패드로 전화번호 뒤 4자리 입력
2. [ ] 검색 결과 확인

**예상 결과:**
- 일치하는 고객 목록 표시
- 각 키 입력 시 오디오 피드백 (설정된 경우)
- 고객 선택 시 상세 정보 표시

---

### 시나리오 3.3: 고객 상세 조회
**목적:** 고객 상세 정보 및 거래 내역 확인

**단계:**
1. [ ] 고객 목록에서 특정 고객 클릭
2. [ ] 고객 상세 페이지 확인

**예상 결과:**
- 고객명, 전화번호 뒤 4자리 표시
- 현재 잔액 표시
- 최근 거래 내역 표시

---

### 시나리오 3.4: 고객 정보 수정
**목적:** 고객 정보 업데이트 기능 검증

**단계:**
1. [ ] 고객 상세에서 "수정" 버튼 클릭
2. [ ] 고객명 변경
3. [ ] "저장" 클릭

**예상 결과:**
- 변경된 정보로 업데이트
- 성공 메시지 표시

---

## 4. 충전 기능 테스트

### 시나리오 4.1: 기본 충전
**목적:** 정상 충전 플로우 검증

**단계:**
1. [ ] 고객 선택 후 "충전" 버튼 클릭
2. [ ] 충전 모달에서:
   - 실제 결제 금액 입력 (예: 100,000원)
   - 서비스 금액 입력 (예: 10,000원)
   - 결제 수단 선택 (카드/현금/계좌이체)
3. [ ] PIN 번호 입력
4. [ ] "충전" 클릭

**예상 결과:**
- 잔액 = 기존 잔액 + 실제결제금액 + 서비스금액
- 거래 내역에 충전 기록 추가
- 성공 메시지 및 영수증 정보 표시

**확인 사항:**
- [ ] 잔액이 정확히 계산되는가?
- [ ] 거래 내역에 메모가 기록되는가?
- [ ] PIN 잘못 입력 시 적절한 오류 메시지가 표시되는가?

---

### 시나리오 4.2: 서비스 금액 없이 충전
**목적:** 서비스 금액 0원 충전 검증

**단계:**
1. [ ] 실제 결제 금액만 입력 (서비스 금액 = 0)
2. [ ] 충전 진행

**예상 결과:**
- 잔액 = 기존 잔액 + 실제결제금액
- 정상 충전 처리

---

### 시나리오 4.3: 대량 금액 충전
**목적:** 큰 금액 처리 검증

**단계:**
1. [ ] 10,000,000원 (천만원) 충전 시도

**예상 결과:**
- 정상 충전 처리
- 금액 포맷이 올바르게 표시 (10,000,000원)

---

## 5. 차감 기능 테스트

### 시나리오 5.1: 기본 차감 (메뉴 선택)
**목적:** 메뉴 기반 차감 기능 검증

**단계:**
1. [ ] 고객 선택 후 "차감" 버튼 클릭
2. [ ] 메뉴 항목 선택 (아메리카노 x2)
3. [ ] PIN 입력
4. [ ] "차감" 클릭

**예상 결과:**
- 잔액 = 기존 잔액 - 선택 메뉴 합계
- 거래 내역에 메뉴 정보와 함께 기록

---

### 시나리오 5.2: 직접 금액 입력 차감
**목적:** 수동 금액 입력 차감 검증

**단계:**
1. [ ] 차감 모달에서 "직접 입력" 탭 선택
2. [ ] 금액 직접 입력
3. [ ] 메모 입력 (선택)
4. [ ] PIN 입력 후 차감

**예상 결과:**
- 입력한 금액만큼 차감
- 메모가 거래 내역에 기록

---

### 시나리오 5.3: 잔액 부족 차감 시도
**목적:** 잔액 부족 시 처리 확인

**단계:**
1. [ ] 현재 잔액보다 큰 금액으로 차감 시도

**예상 결과:**
- "잔액이 부족합니다" 오류 메시지
- 차감 실패
- 잔액 변동 없음

---

### 시나리오 5.4: 연속 차감 (Race Condition 테스트)
**목적:** 빠른 연속 차감 시 동시성 문제 확인

**단계:**
1. [ ] 충분한 잔액이 있는 고객 선택
2. [ ] 두 개의 브라우저 탭에서 동시에 차감 시도
   (또는 매우 빠르게 연속 차감)

**예상 결과:**
- 모든 차감이 순차적으로 처리
- 최종 잔액이 정확히 계산됨
- 잔액이 음수가 되지 않음

---

## 6. 거래 취소 테스트

### 시나리오 6.1: 충전 취소
**목적:** 충전 거래 취소 기능 검증

**단계:**
1. [ ] 거래 내역에서 최근 충전 거래 선택
2. [ ] "취소" 버튼 클릭
3. [ ] 취소 사유 입력
4. [ ] PIN 입력 후 확인

**예상 결과:**
- 잔액 = 기존 잔액 - 충전 금액
- 거래 내역에 취소 기록 추가
- 원본 거래에 "취소됨" 표시

---

### 시나리오 6.2: 차감 취소
**목적:** 차감 거래 취소 기능 검증

**단계:**
1. [ ] 최근 차감 거래 선택
2. [ ] 취소 진행

**예상 결과:**
- 잔액 = 기존 잔액 + 차감 금액 (잔액 복구)
- 취소 기록 추가

---

### 시나리오 6.3: 이미 취소된 거래 재취소 시도
**목적:** 중복 취소 방지 확인

**단계:**
1. [ ] 이미 취소된 거래의 취소 시도

**예상 결과:**
- "이미 취소된 거래입니다" 메시지
- 취소 불가

---

### 시나리오 6.4: 취소 시 잔액 부족
**목적:** 충전 취소 시 잔액 부족 처리

**단계:**
1. [ ] 잔액 10,000원인 고객의 100,000원 충전 거래 취소 시도

**예상 결과:**
- "잔액 부족으로 취소할 수 없습니다" 메시지
- 취소 실패

---

## 7. 대시보드 테스트

### 시나리오 7.1: 요약 정보 확인
**목적:** 대시보드 요약 데이터 정확성 검증

**단계:**
1. [ ] 대시보드 페이지 접속
2. [ ] 표시되는 정보 확인:
   - 총 고객 수
   - 오늘 충전/차감 합계
   - 최근 거래 목록

**예상 결과:**
- 모든 수치가 실제 데이터와 일치
- 최근 거래가 시간순 정렬

---

### 시나리오 7.2: 기간별 분석
**목적:** 기간 필터링 기능 검증

**단계:**
1. [ ] 대시보드에서 "이번 주" 선택
2. [ ] "이번 달" 선택
3. [ ] 커스텀 날짜 범위 선택

**예상 결과:**
- 선택한 기간에 맞는 데이터만 표시
- 차트/그래프 업데이트

---

### 시나리오 7.3: 미래 날짜 필터 경고
**목적:** 미래 날짜 선택 시 경고 표시 확인

**단계:**
1. [ ] 필터에서 종료일을 미래 날짜로 설정

**예상 결과:**
- "미래 날짜가 포함되어 있습니다" 경고 표시
- 검색은 정상 작동 (현재까지 데이터)

---

## 8. PIN 관리 테스트

### 시나리오 8.1: PIN 변경
**목적:** PIN 변경 기능 검증

**단계:**
1. [ ] 설정 > PIN 변경 메뉴 접근
2. [ ] 현재 PIN 입력
3. [ ] 새 PIN 입력 (4자리 숫자)
4. [ ] 새 PIN 확인

**예상 결과:**
- "PIN이 변경되었습니다" 메시지
- 새 PIN으로 거래 가능

---

### 시나리오 8.2: PIN 틀림 - 잠금
**목적:** PIN 보안 잠금 기능 검증

**단계:**
1. [ ] 충전/차감 시 PIN을 5회 연속 틀리게 입력

**예상 결과:**
- 5회 실패 후 "1분 후 다시 시도하세요" 메시지
- 잠금 해제 전 PIN 입력 불가
- 남은 시도 횟수 표시

---

## 9. 비밀번호 재설정 테스트

### 시나리오 9.1: 비밀번호 재설정 요청
**목적:** 이메일 인증 코드 발송 확인

**전제 조건:** 회원가입 시 이메일 등록 필요

**단계:**
1. [ ] 로그인 페이지 > "비밀번호 찾기" 클릭
2. [ ] 등록된 이메일 입력
3. [ ] "인증번호 발송" 클릭

**예상 결과:**
- 이메일로 6자리 인증번호 발송
- "인증번호가 발송되었습니다" 메시지

---

### 시나리오 9.2: 비밀번호 재설정 완료
**목적:** 새 비밀번호 설정 검증

**단계:**
1. [ ] 이메일로 받은 인증번호 입력
2. [ ] 새 비밀번호 입력 (8자 이상, 영문+숫자)
3. [ ] "비밀번호 변경" 클릭

**예상 결과:**
- "비밀번호가 변경되었습니다" 메시지
- 새 비밀번호로 로그인 가능

---

### 시나리오 9.3: 잘못된 인증번호
**목적:** 인증번호 오류 처리 확인

**단계:**
1. [ ] 틀린 인증번호 5회 입력

**예상 결과:**
- 5회 실패 후 5분간 시도 불가
- "잠금" 상태 메시지 표시

---

## 10. 에러 핸들링 테스트

### 시나리오 10.1: 네트워크 오류 (오프라인)
**목적:** 오프라인 상태에서 명확한 에러 메시지 표시 확인

**단계:**
1. [ ] 로그인된 상태에서 대시보드 접속
2. [ ] 개발자 도구 > Network > Offline 설정 (또는 인터넷 연결 해제)
3. [ ] 고객 검색 또는 충전/차감 시도

**예상 결과:**
- 화면 상단에 빨간색 배너 표시:
  - "네트워크 오류가 발생했습니다"
  - "인터넷 연결을 확인해 주세요."
  - "다시 시도" 버튼 표시
- 배너의 "다시 시도" 클릭 시 연결 재확인
- 연결 복구 시 배너 자동 사라짐

**체크포인트:**
- [ ] 오프라인 시 배너가 즉시 표시되는가?
- [ ] "다시 시도" 버튼이 동작하는가?
- [ ] 온라인 복구 시 배너가 사라지는가?
- [ ] 거래 모달 내 에러 메시지도 "네트워크 오류" 로 표시되는가?

---

### 시나리오 10.2: 서버 오류 (500)
**목적:** 서버 오류 발생 시 사용자에게 명확한 안내 메시지 표시

**단계:**
1. [ ] 로그인된 상태에서 백엔드 서버 중지 (또는 의도적 500 응답 유발)
2. [ ] 고객 목록 조회, 충전/차감 등 API 호출 액션 시도

**예상 결과:**
- 화면 오른쪽 상단에 토스트 메시지 표시 (5초간):
  - "서버 오류가 발생했습니다. 관리자에게 문의해 주세요."
- 거래 모달 내에서 실패 시 동일한 메시지 표시
- 토스트는 빨간색 배경으로 에러임을 명확히 표시

**체크포인트:**
- [ ] 500 에러 발생 시 토스트가 표시되는가?
- [ ] "관리자에게 문의해 주세요" 문구가 포함되어 있는가?
- [ ] 토스트가 5초 후 자동으로 사라지는가?
- [ ] 모달 내 에러 메시지도 적절히 표시되는가?

---

### 시나리오 10.3: 404 페이지
**목적:** 존재하지 않는 페이지 접근 시 테마에 맞는 404 페이지 표시

**단계:**
1. [ ] 브라우저 주소창에 존재하지 않는 URL 입력 (예: `/nonexistent`, `/abc123`)
2. [ ] 404 페이지 확인
3. [ ] "홈으로 이동" 버튼 클릭
4. [ ] "이전 페이지" 버튼 클릭

**예상 결과:**
- 카페 테마에 맞는 404 페이지 표시:
  - 커피잔 아이콘과 돋보기 아이콘 조합
  - "404" 큰 숫자 (primary 색상)
  - "페이지를 찾을 수 없습니다" 제목
  - "요청하신 페이지가 존재하지 않거나 이동되었을 수 있습니다." 설명
- "이전 페이지" 버튼 클릭 시 브라우저 뒤로가기
- "홈으로 이동" 버튼 클릭 시 대시보드(/)로 이동
- 다크모드에서도 적절히 표시

**체크포인트:**
- [ ] 404 페이지가 앱 테마와 일관되게 디자인되어 있는가?
- [ ] "홈으로 이동" 버튼이 정상 작동하는가?
- [ ] "이전 페이지" 버튼이 정상 작동하는가?
- [ ] 라이트/다크 모드 전환 시 적절히 표시되는가?

---

### 시나리오 10.4: 네트워크 오류 + 온라인 복구
**목적:** 네트워크 복구 시 자동 감지 확인

**단계:**
1. [ ] 오프라인 설정 후 배너 표시 확인
2. [ ] 온라인으로 전환 (Network > Online)
3. [ ] 배너의 "다시 시도" 클릭

**예상 결과:**
- 배너가 사라짐
- 정상적으로 API 호출 가능

---

### 시나리오 10.5: 복합 에러 시나리오
**목적:** 여러 에러 상황이 연속 발생할 때 처리 확인

**단계:**
1. [ ] 충전 모달 열기
2. [ ] 금액 입력 후 오프라인으로 전환
3. [ ] "충전하기" 클릭 시도
4. [ ] 온라인으로 복구 후 다시 시도

**예상 결과:**
- 오프라인 상태에서 충전 실패 + 네트워크 에러 배너 표시
- 복구 후 정상 충전 가능

---

## 테스트 결과 기록 템플릿

| 시나리오 | 결과 (Pass/Fail) | 비고 |
|----------|------------------|------|
| 1.1 정상 회원가입 | | |
| 1.2 아이디 중복 확인 | | |
| ... | | |

---

## 테스트 완료 체크리스트

- [ ] 모든 시나리오 테스트 완료
- [ ] 발견된 버그 이슈 등록
- [ ] 크리티컬 이슈 없음 확인
- [ ] 성능 이슈 없음 확인
- [ ] 보안 취약점 없음 확인
- [ ] 테스트 결과 리포트 작성

---

**문서 작성일:** 2024-01-20
**작성자:** Claude Code
**버전:** 1.0
