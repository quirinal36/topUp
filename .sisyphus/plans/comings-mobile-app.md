# Comings Mobile App Implementation Plan

> **Generated by Prometheus** | Date: 2026-01-23
> **Project**: React Native + Expo Mobile App for Comings Platform
> **Repository**: comings-mobile (separate from web)

---

## Context

### Original Request
Convert the existing Comings React web frontend to a React Native + Expo mobile app with biometric authentication support for both Android and iOS platforms.

### Interview Summary

| Decision | Choice |
|----------|--------|
| Project Structure | Separate Repository (comings-mobile) |
| Feature Rollout | Phased (core first, then analytics, then extras) |
| Biometric Auth | App launch only (replaces PIN for app unlock) |
| Deployment | Internal testing 2-4 weeks, then production |
| Offline Support | Online only (same as web) |
| Push Notifications | Structure only (implementation later) |
| Type Sync Strategy | API-First (OpenAPI spec → TypeScript generation) |

### Research Findings

**Reusable from Web (70%)**:
- TypeScript types/interfaces (will be auto-generated from OpenAPI)
- Business logic (validation, calculations)
- API client structure (Axios → fetch/axios-rn)
- Zustand store logic (with AsyncStorage adapter)

**Needs Rewrite (30%)**:
- UI components (Tailwind → React Native StyleSheet/NativeWind)
- Navigation (React Router → React Navigation)
- Storage (localStorage → AsyncStorage/SecureStore)
- Platform-specific features (Biometrics)

---

## Work Objectives

### Core Objective
Create a production-ready React Native mobile app that provides core POS functionality (customer management, charge/deduct operations) with biometric app lock for both iOS and Android.

### Deliverables
1. New `comings-mobile` repository with Expo managed workflow
2. Phase 1: Core POS functionality (login, customers, transactions)
3. Phase 2: Analytics and settings screens
4. Phase 3: App store submission packages (TestFlight + Play Store Internal)

### Definition of Done
- [ ] App builds successfully for iOS and Android
- [ ] All Phase 1 features functional and tested
- [ ] Biometric authentication working on both platforms
- [ ] Internal test deployment complete
- [ ] No critical bugs or crashes

---

## Guardrails

### Must Have
- Expo managed workflow (no ejection)
- TypeScript strict mode
- Biometric fallback to PIN when unavailable
- Secure token storage (expo-secure-store)
- Same API endpoints as web (no backend changes)
- Minimum iOS 13.0, Android 8.0 (API 26)

### Must NOT Have
- Offline mode or local database (online only)
- Push notification implementation (structure only)
- Web-specific UI patterns (no hover states, etc.)
- Custom native modules (Expo-only packages)
- Backend modifications

---

## Technology Stack

### Core Framework
| Package | Version | Purpose |
|---------|---------|---------|
| expo | ~52.x | Managed workflow framework |
| react-native | 0.76.x | Core mobile framework |
| typescript | ~5.3 | Type safety |

### Navigation
| Package | Purpose |
|---------|---------|
| @react-navigation/native | Navigation container |
| @react-navigation/native-stack | Stack navigator |
| @react-navigation/bottom-tabs | Tab navigator |
| react-native-screens | Native screen optimization |
| react-native-safe-area-context | Safe area handling |

### State & Data
| Package | Purpose |
|---------|---------|
| zustand | State management (same as web) |
| @tanstack/react-query | Server state + caching |
| axios | HTTP client |

### Authentication & Security
| Package | Purpose |
|---------|---------|
| expo-local-authentication | Biometric (Face ID, Fingerprint) |
| expo-secure-store | Encrypted token storage |

### UI Components
| Package | Purpose |
|---------|---------|
| nativewind | Tailwind CSS for React Native |
| react-native-reanimated | Animations |
| react-native-gesture-handler | Touch gestures |
| expo-haptics | Haptic feedback |
| @expo/vector-icons | Icon library |

### Development Tools
| Package | Purpose |
|---------|---------|
| openapi-typescript | Generate types from OpenAPI |
| expo-dev-client | Development builds |
| expo-updates | OTA updates (future) |

### Push Notification Structure (Not Implemented)
| Package | Purpose |
|---------|---------|
| expo-notifications | Push notification handling |
| expo-device | Device info for push tokens |

---

## Directory Structure

```
comings-mobile/
├── app.json                    # Expo config
├── App.tsx                     # Entry point
├── babel.config.js
├── tailwind.config.js          # NativeWind config
├── tsconfig.json
├── package.json
├── eas.json                    # EAS Build config
│
├── scripts/
│   └── generate-types.sh       # OpenAPI → TypeScript
│
├── src/
│   ├── api/
│   │   ├── client.ts           # Axios instance + interceptors
│   │   ├── auth.ts             # Auth endpoints
│   │   ├── customers.ts        # Customer endpoints
│   │   ├── transactions.ts     # Transaction endpoints
│   │   └── dashboard.ts        # Dashboard endpoints
│   │
│   ├── components/
│   │   ├── common/
│   │   │   ├── Button.tsx
│   │   │   ├── Input.tsx
│   │   │   ├── Card.tsx
│   │   │   ├── Loading.tsx
│   │   │   └── ErrorBoundary.tsx
│   │   │
│   │   ├── pos/
│   │   │   ├── Numpad.tsx
│   │   │   ├── QuickAmountSelector.tsx
│   │   │   └── TransactionModal.tsx
│   │   │
│   │   ├── customer/
│   │   │   ├── CustomerCard.tsx
│   │   │   ├── CustomerList.tsx
│   │   │   └── CustomerSearch.tsx
│   │   │
│   │   └── auth/
│   │       ├── BiometricPrompt.tsx
│   │       └── PinInput.tsx
│   │
│   ├── navigation/
│   │   ├── RootNavigator.tsx   # Auth vs App stack
│   │   ├── AuthNavigator.tsx   # Login screens
│   │   ├── AppNavigator.tsx    # Main app tabs
│   │   └── types.ts            # Navigation types
│   │
│   ├── screens/
│   │   ├── auth/
│   │   │   ├── LoginScreen.tsx
│   │   │   ├── BiometricSetupScreen.tsx
│   │   │   └── PinSetupScreen.tsx
│   │   │
│   │   ├── main/
│   │   │   ├── DashboardScreen.tsx
│   │   │   ├── CustomerListScreen.tsx
│   │   │   ├── CustomerDetailScreen.tsx
│   │   │   └── TransactionScreen.tsx
│   │   │
│   │   ├── analytics/          # Phase 2
│   │   │   └── AnalyticsScreen.tsx
│   │   │
│   │   └── settings/           # Phase 2
│   │       ├── SettingsScreen.tsx
│   │       └── SecuritySettingsScreen.tsx
│   │
│   ├── stores/
│   │   ├── authStore.ts        # Auth + biometric state
│   │   ├── customerStore.ts    # Customer data
│   │   └── appStore.ts         # App-wide state
│   │
│   ├── hooks/
│   │   ├── useAuth.ts
│   │   ├── useBiometric.ts
│   │   ├── useCustomers.ts
│   │   └── useTransactions.ts
│   │
│   ├── types/
│   │   ├── generated/          # Auto-generated from OpenAPI
│   │   │   └── api.ts
│   │   ├── navigation.ts
│   │   └── index.ts
│   │
│   ├── utils/
│   │   ├── storage.ts          # SecureStore wrapper
│   │   ├── formatters.ts       # Number/date formatting
│   │   └── validation.ts       # Input validation
│   │
│   ├── constants/
│   │   ├── colors.ts
│   │   ├── layout.ts           # Touch target sizes
│   │   └── api.ts              # API URLs
│   │
│   └── services/
│       ├── biometric.ts        # Biometric service
│       └── notification.ts     # Push notification structure
│
├── assets/
│   ├── icon.png               # App icon (1024x1024)
│   ├── splash.png             # Splash screen
│   └── adaptive-icon.png      # Android adaptive icon
│
└── __tests__/                 # Jest tests
    ├── components/
    ├── screens/
    └── stores/
```

---

## Web to Mobile File Mapping

### Stores (Direct Port with Adapter)
| Web File | Mobile File | Changes |
|----------|-------------|---------|
| `frontend/src/stores/authStore.ts` | `src/stores/authStore.ts` | localStorage → SecureStore, add biometric state |
| `frontend/src/stores/customerStore.ts` | `src/stores/customerStore.ts` | localStorage → AsyncStorage |

### API (Minimal Changes)
| Web File | Mobile File | Changes |
|----------|-------------|---------|
| `frontend/src/api/client.ts` | `src/api/client.ts` | Import path changes only |
| `frontend/src/api/auth.ts` | `src/api/auth.ts` | Same endpoints |
| `frontend/src/api/customers.ts` | `src/api/customers.ts` | Same endpoints |
| `frontend/src/api/transactions.ts` | `src/api/transactions.ts` | Same endpoints |

### Types (Auto-Generated)
| Web File | Mobile File | Changes |
|----------|-------------|---------|
| `frontend/src/types/index.ts` | `src/types/generated/api.ts` | Generated from OpenAPI |

### Components (Rewrite Required)
| Web Component | Mobile Component | Notes |
|---------------|------------------|-------|
| `components/pos/Numpad.tsx` | `components/pos/Numpad.tsx` | Tailwind → NativeWind, add haptics |
| `components/pos/QuickAmountSelector.tsx` | `components/pos/QuickAmountSelector.tsx` | Same logic, different styling |
| `components/CustomerCard.tsx` | `components/customer/CustomerCard.tsx` | TouchableOpacity, swipe actions |
| N/A | `components/auth/BiometricPrompt.tsx` | New component |

### Pages → Screens (Rewrite Required)
| Web Page | Mobile Screen | Notes |
|----------|---------------|-------|
| `pages/Login.tsx` | `screens/auth/LoginScreen.tsx` | Add biometric option |
| `pages/Dashboard.tsx` | `screens/main/DashboardScreen.tsx` | Simplified for mobile |
| `pages/Customers.tsx` | `screens/main/CustomerListScreen.tsx` | FlatList instead of map |
| `pages/CustomerDetail.tsx` | `screens/main/CustomerDetailScreen.tsx` | Native navigation params |
| `pages/Analytics.tsx` | `screens/analytics/AnalyticsScreen.tsx` | Phase 2 |
| `pages/Settings.tsx` | `screens/settings/SettingsScreen.tsx` | Phase 2 |

---

## Implementation Phases

## Phase 0: Project Setup (2-3 days)

### P0-1: Repository & Expo Initialization
**Acceptance Criteria**: Expo project runs on iOS simulator and Android emulator

```bash
# Create new repository
npx create-expo-app comings-mobile --template expo-template-blank-typescript

# Install core dependencies
npx expo install \
  @react-navigation/native \
  @react-navigation/native-stack \
  @react-navigation/bottom-tabs \
  react-native-screens \
  react-native-safe-area-context \
  react-native-gesture-handler \
  react-native-reanimated

# Install state management
npm install zustand @tanstack/react-query axios

# Install auth & security
npx expo install expo-local-authentication expo-secure-store

# Install UI
npm install nativewind
npm install --save-dev tailwindcss
npx expo install expo-haptics @expo/vector-icons

# Install dev tools
npm install --save-dev openapi-typescript
```

**Tasks**:
- [ ] Create GitHub repository `comings-mobile`
- [ ] Initialize Expo project with TypeScript template
- [ ] Install all dependencies listed above
- [ ] Configure NativeWind (tailwind.config.js, babel.config.js)
- [ ] Configure TypeScript strict mode
- [ ] Verify app runs on iOS simulator
- [ ] Verify app runs on Android emulator
- [ ] Set up ESLint + Prettier

### P0-2: OpenAPI Type Generation Setup
**Acceptance Criteria**: Types auto-generate from backend OpenAPI spec

```bash
# scripts/generate-types.sh
#!/bin/bash
npx openapi-typescript https://www.comings.co.kr/openapi.json -o src/types/generated/api.ts
```

**Tasks**:
- [ ] Create `scripts/generate-types.sh`
- [ ] Add npm script: `"generate-types": "bash scripts/generate-types.sh"`
- [ ] Run generation, verify types are correct
- [ ] Add generated types to .gitignore (optional) or commit

### P0-3: Directory Structure & Base Files
**Acceptance Criteria**: All directories created, placeholder files in place

**Tasks**:
- [ ] Create directory structure as specified above
- [ ] Create `src/constants/colors.ts` with color palette
- [ ] Create `src/constants/layout.ts` with touch target sizes (56-64px)
- [ ] Create `src/constants/api.ts` with API base URL
- [ ] Create `src/utils/storage.ts` with SecureStore wrapper
- [ ] Create `src/utils/formatters.ts` (copy from web, adjust imports)

### P0-4: EAS Build Configuration
**Acceptance Criteria**: Development builds can be created via EAS

```json
// eas.json
{
  "cli": { "version": ">= 5.0.0" },
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal"
    },
    "preview": {
      "distribution": "internal"
    },
    "production": {}
  },
  "submit": {
    "production": {}
  }
}
```

**Tasks**:
- [ ] Create `eas.json` configuration
- [ ] Configure app.json with proper bundle IDs
- [ ] Set up Apple Developer account access (if not already)
- [ ] Set up Google Play Console access (if not already)
- [ ] Run `eas build --profile development --platform all`

---

## Phase 1: Core Features (2-3 weeks)

### P1-1: Authentication Store & API Client (2 days)
**Acceptance Criteria**: Auth store persists to SecureStore, API client handles auth headers

**Tasks**:
- [ ] Create `src/api/client.ts` with Axios instance
- [ ] Add request interceptor for Bearer token
- [ ] Add response interceptor for 401 handling
- [ ] Create `src/stores/authStore.ts` with Zustand
- [ ] Implement SecureStore persistence middleware
- [ ] Add login/logout actions
- [ ] Add token refresh logic
- [ ] Test token persistence across app restart

**Reference Web Code**:
```typescript
// Adapt from: frontend/src/stores/authStore.ts
// Change: persist middleware uses SecureStore instead of localStorage
```

### P1-2: Biometric Authentication Service (2 days)
**Acceptance Criteria**: Biometric prompt works on iOS (Face ID) and Android (Fingerprint)

**Tasks**:
- [ ] Create `src/services/biometric.ts`
- [ ] Implement `checkBiometricAvailability()`
- [ ] Implement `authenticateWithBiometric()`
- [ ] Handle biometric not enrolled case
- [ ] Handle biometric not available case (provide PIN fallback)
- [ ] Create `src/hooks/useBiometric.ts` hook
- [ ] Create `src/components/auth/BiometricPrompt.tsx`
- [ ] Add biometric enabled flag to authStore
- [ ] Test on iOS simulator (Face ID)
- [ ] Test on Android emulator (Fingerprint)

**Implementation**:
```typescript
// src/services/biometric.ts
import * as LocalAuthentication from 'expo-local-authentication';

export const biometricService = {
  async isAvailable(): Promise<boolean> {
    const compatible = await LocalAuthentication.hasHardwareAsync();
    const enrolled = await LocalAuthentication.isEnrolledAsync();
    return compatible && enrolled;
  },

  async authenticate(): Promise<boolean> {
    const result = await LocalAuthentication.authenticateAsync({
      promptMessage: 'Comings 앱 잠금 해제',
      fallbackLabel: 'PIN 사용',
      disableDeviceFallback: false,
    });
    return result.success;
  },

  async getBiometricType(): Promise<'face' | 'fingerprint' | 'none'> {
    const types = await LocalAuthentication.supportedAuthenticationTypesAsync();
    if (types.includes(LocalAuthentication.AuthenticationType.FACIAL_RECOGNITION)) {
      return 'face';
    }
    if (types.includes(LocalAuthentication.AuthenticationType.FINGERPRINT)) {
      return 'fingerprint';
    }
    return 'none';
  },
};
```

### P1-3: Navigation Structure (1 day)
**Acceptance Criteria**: App navigates between auth and main stacks based on auth state

**Tasks**:
- [ ] Create `src/navigation/types.ts` with type definitions
- [ ] Create `src/navigation/AuthNavigator.tsx` (Login, BiometricSetup)
- [ ] Create `src/navigation/AppNavigator.tsx` (Tabs: Dashboard, Customers, Settings)
- [ ] Create `src/navigation/RootNavigator.tsx` (switches based on auth)
- [ ] Implement deep linking structure (for future use)
- [ ] Test navigation flow: Login → Dashboard → Customer Detail

**Structure**:
```
RootNavigator
├── AuthNavigator (when not authenticated)
│   ├── LoginScreen
│   ├── BiometricSetupScreen
│   └── PinSetupScreen
│
└── AppNavigator (when authenticated)
    └── TabNavigator
        ├── DashboardTab
        │   └── DashboardScreen
        ├── CustomersTab
        │   ├── CustomerListScreen
        │   ├── CustomerDetailScreen
        │   └── TransactionScreen
        └── SettingsTab (Phase 2)
            └── SettingsScreen
```

### P1-4: Login Screen (2 days)
**Acceptance Criteria**: User can login with username/password, biometric prompt on app resume

**Tasks**:
- [ ] Create `src/screens/auth/LoginScreen.tsx`
- [ ] Implement login form (username, password inputs)
- [ ] Add "로그인" button with loading state
- [ ] Integrate with auth API
- [ ] Show biometric button if available and enabled
- [ ] Handle login errors with proper messages
- [ ] Store tokens in SecureStore on success
- [ ] Navigate to Dashboard on success
- [ ] Add app state listener for biometric on resume

**Reference Web Code**: `frontend/src/pages/Login.tsx`

### P1-5: Common UI Components (2 days)
**Acceptance Criteria**: Reusable components match POS design (56-64px touch targets)

**Tasks**:
- [ ] Create `src/components/common/Button.tsx` (Primary, Secondary, Danger variants)
- [ ] Create `src/components/common/Input.tsx` (with label, error state)
- [ ] Create `src/components/common/Card.tsx`
- [ ] Create `src/components/common/Loading.tsx` (full screen + inline)
- [ ] Create `src/components/common/ErrorBoundary.tsx`
- [ ] Ensure all touch targets are 56-64px minimum
- [ ] Add haptic feedback to buttons

### P1-6: Customer Store & API (1 day)
**Acceptance Criteria**: Customer data fetches, caches, and updates correctly

**Tasks**:
- [ ] Create `src/api/customers.ts` endpoints
- [ ] Create `src/api/transactions.ts` endpoints
- [ ] Create `src/stores/customerStore.ts` with Zustand
- [ ] Implement pagination support
- [ ] Implement search functionality
- [ ] Create `src/hooks/useCustomers.ts` with React Query
- [ ] Create `src/hooks/useTransactions.ts`

**Reference Web Code**: `frontend/src/stores/customerStore.ts`

### P1-7: Dashboard Screen (2 days)
**Acceptance Criteria**: Shows today's summary, quick actions, recent transactions

**Tasks**:
- [ ] Create `src/screens/main/DashboardScreen.tsx`
- [ ] Implement summary cards (today's revenue, transaction count)
- [ ] Add quick action buttons (new customer, quick charge)
- [ ] Show recent transactions list
- [ ] Add pull-to-refresh functionality
- [ ] Implement auto-refresh interval

**Reference Web Code**: `frontend/src/pages/Dashboard.tsx`

### P1-8: Customer List Screen (2 days)
**Acceptance Criteria**: Searchable, scrollable customer list with balance display

**Tasks**:
- [ ] Create `src/screens/main/CustomerListScreen.tsx`
- [ ] Implement search bar with debounce
- [ ] Create `src/components/customer/CustomerCard.tsx`
- [ ] Use FlatList with proper optimization (keyExtractor, getItemLayout)
- [ ] Show customer name, phone, balance
- [ ] Add pull-to-refresh
- [ ] Navigate to detail on press
- [ ] Add floating action button for new customer

**Reference Web Code**: `frontend/src/pages/Customers.tsx`

### P1-9: Customer Detail Screen (2 days)
**Acceptance Criteria**: Shows customer info, balance, transaction history, charge/deduct buttons

**Tasks**:
- [ ] Create `src/screens/main/CustomerDetailScreen.tsx`
- [ ] Display customer profile (name, phone, memo)
- [ ] Display current balance prominently
- [ ] Show transaction history list
- [ ] Add "충전" and "차감" buttons
- [ ] Navigate to Transaction screen on button press

**Reference Web Code**: `frontend/src/pages/CustomerDetail.tsx`

### P1-10: Transaction Screen (3 days)
**Acceptance Criteria**: Numpad input, quick amounts, PIN verification, transaction execution

**Tasks**:
- [ ] Create `src/screens/main/TransactionScreen.tsx`
- [ ] Create `src/components/pos/Numpad.tsx` with haptic feedback
- [ ] Create `src/components/pos/QuickAmountSelector.tsx`
- [ ] Implement amount input with formatting
- [ ] Add memo input option
- [ ] Implement PIN verification before transaction
- [ ] Create `src/components/auth/PinInput.tsx`
- [ ] Execute transaction via API
- [ ] Show success/error feedback
- [ ] Navigate back on success

**Reference Web Code**:
- `frontend/src/components/pos/Numpad.tsx`
- `frontend/src/components/pos/QuickAmountSelector.tsx`

---

## Phase 2: Additional Features (1-2 weeks)

### P2-1: Analytics Screen (2 days)
**Acceptance Criteria**: Shows revenue charts, customer statistics

**Tasks**:
- [ ] Create `src/screens/analytics/AnalyticsScreen.tsx`
- [ ] Implement revenue chart (daily/weekly/monthly)
- [ ] Show total customer count
- [ ] Show total deposit amount
- [ ] Add date range selector

**Reference Web Code**: `frontend/src/pages/Analytics.tsx`

### P2-2: Settings Screen (2 days)
**Acceptance Criteria**: User can manage account, security settings

**Tasks**:
- [ ] Create `src/screens/settings/SettingsScreen.tsx`
- [ ] Show shop info
- [ ] Add logout button
- [ ] Link to Security Settings

### P2-3: Security Settings Screen (2 days)
**Acceptance Criteria**: User can enable/disable biometric, change PIN

**Tasks**:
- [ ] Create `src/screens/settings/SecuritySettingsScreen.tsx`
- [ ] Toggle biometric authentication
- [ ] Change PIN option
- [ ] Show biometric type (Face ID vs Fingerprint)

### P2-4: Customer Add/Edit (2 days)
**Acceptance Criteria**: Can create new customer, edit existing customer

**Tasks**:
- [ ] Create customer add modal/screen
- [ ] Implement form validation
- [ ] Create customer edit functionality
- [ ] Handle phone number formatting

### P2-5: Push Notification Structure (1 day)
**Acceptance Criteria**: Notification permissions requested, token stored (not functional yet)

**Tasks**:
- [ ] Create `src/services/notification.ts` with placeholder functions
- [ ] Request notification permissions
- [ ] Get and store push token
- [ ] Set up notification handlers (no backend integration yet)

---

## Phase 3: Release Preparation (1-2 weeks)

### P3-1: App Assets (1 day)
**Acceptance Criteria**: App icon, splash screen, adaptive icon all configured

**Tasks**:
- [ ] Create app icon (1024x1024)
- [ ] Create splash screen
- [ ] Create Android adaptive icon
- [ ] Configure in app.json

### P3-2: App Store Metadata
**Acceptance Criteria**: All required metadata prepared

**Tasks**:
- [ ] Write app description (Korean)
- [ ] Prepare screenshots (6.5" iPhone, 5.5" iPhone, Android)
- [ ] Create privacy policy page
- [ ] Prepare release notes

### P3-3: Testing & QA (3-5 days)
**Acceptance Criteria**: All features tested, no critical bugs

**Tasks**:
- [ ] Create test plan document
- [ ] Test all screens on iOS device
- [ ] Test all screens on Android device
- [ ] Test biometric on multiple devices
- [ ] Test offline behavior (error handling)
- [ ] Fix identified bugs

### P3-4: Internal Test Deployment
**Acceptance Criteria**: App available on TestFlight and Play Store Internal Testing

**Tasks**:
- [ ] Build iOS production app (`eas build --platform ios`)
- [ ] Submit to TestFlight
- [ ] Build Android production app (`eas build --platform android`)
- [ ] Upload to Play Store Internal Testing
- [ ] Invite internal testers
- [ ] Collect feedback for 2-4 weeks

### P3-5: Production Release
**Acceptance Criteria**: App approved and live on both stores

**Tasks**:
- [ ] Address feedback from internal testing
- [ ] Submit iOS app for review
- [ ] Submit Android app for review
- [ ] Monitor for approval
- [ ] Announce release

---

## Commit Strategy

Follow atomic commits with conventional commit messages:

```
Phase 0:
- chore: initialize expo project with typescript
- chore: configure nativewind and tailwind
- chore: add openapi type generation script
- chore: create directory structure and base files
- chore: configure eas build

Phase 1:
- feat(auth): add auth store with secure storage
- feat(auth): implement biometric service
- feat(navigation): add root navigator with auth flow
- feat(auth): add login screen
- feat(ui): add common components (button, input, card)
- feat(customers): add customer store and api
- feat(dashboard): add dashboard screen
- feat(customers): add customer list screen
- feat(customers): add customer detail screen
- feat(transactions): add transaction screen with numpad

Phase 2:
- feat(analytics): add analytics screen
- feat(settings): add settings screens
- feat(customers): add customer add/edit
- chore(notifications): add push notification structure

Phase 3:
- chore: add app assets
- chore: prepare app store metadata
- fix: address qa feedback
- release: v1.0.0
```

---

## Success Criteria

### Phase 1 Complete When:
- [ ] User can login with username/password
- [ ] Biometric unlock works on app resume
- [ ] User can view customer list
- [ ] User can search customers
- [ ] User can view customer detail
- [ ] User can charge customer balance
- [ ] User can deduct from customer balance
- [ ] PIN verification works for transactions
- [ ] App runs without crashes for 1 hour of use

### Phase 2 Complete When:
- [ ] Analytics screen shows accurate data
- [ ] User can modify settings
- [ ] User can enable/disable biometric
- [ ] User can add new customer
- [ ] User can edit existing customer

### Phase 3 Complete When:
- [ ] App passes TestFlight review
- [ ] App passes Play Store review
- [ ] Internal testers report no critical bugs
- [ ] App approved for public release

---

## Risk Mitigation

| Risk | Mitigation |
|------|------------|
| Biometric not available on device | Always show PIN fallback option |
| OpenAPI spec changes | Run type generation in CI, fail on breaking changes |
| App Store rejection | Follow Human Interface Guidelines, prepare privacy policy early |
| Token expiration during use | Implement silent refresh, handle gracefully |
| Network errors | Show clear error messages, retry buttons |

---

## Estimated Timeline

| Phase | Duration | Cumulative |
|-------|----------|------------|
| Phase 0: Setup | 2-3 days | Week 1 |
| Phase 1: Core | 2-3 weeks | Week 2-4 |
| Phase 2: Additional | 1-2 weeks | Week 5-6 |
| Phase 3: Release | 1-2 weeks | Week 7-8 |
| Internal Testing | 2-4 weeks | Week 9-12 |
| **Total to Production** | **~12 weeks** | |

---

## Next Steps

To begin implementation, run:

```bash
/start-work .sisyphus/plans/comings-mobile-app.md
```

This will:
1. Create the new repository
2. Set up the Expo project
3. Begin Phase 0 tasks

---

*Plan generated by Prometheus | Ready for implementation*
